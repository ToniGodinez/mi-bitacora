<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <title>Mi Bit치cora 2025 - Proyecto</title>
    <script>
      // Handle SPA routing for direct URL access
      (function() {
        var redirect = sessionStorage.redirect;
        delete sessionStorage.redirect;
        if (redirect && redirect != location.href) {
          history.replaceState(null, null, redirect);
        }
      })();
    </script>
  </head>
  <body>
    <script>
      // Verificar autenticaci칩n ANTES de cargar React
      function checkAuth() {
        const isAuthenticated = localStorage.getItem('authenticated');
        const loginTime = localStorage.getItem('loginTime');
        const currentTime = Date.now();
        const sessionDuration = 24 * 60 * 60 * 1000; // 24 horas
        
        if (!isAuthenticated || (currentTime - loginTime > sessionDuration)) {
          localStorage.removeItem('authenticated');
          localStorage.removeItem('loginTime');
          // Redirigir al login
          window.location.href = '/login.html';
          return false;
        }
        return true;
      }

      // Solo cargar React si est치 autenticado
      if (checkAuth()) {
        // Usuario autenticado, cargar la app React
        const script = document.createElement('script');
        script.type = 'module';
        script.src = '/src/main.jsx';
        document.body.appendChild(script);
      } else {
        // No autenticado, mostrar mensaje de redirecci칩n
        document.body.innerHTML = `
          <div style="
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            color: #00ffff; 
            font-family: 'Roboto', sans-serif;
            font-size: 1.2rem;
            text-align: center;
          ">
            <div>
              游댏 Redirigiendo al login...<br>
              <small style="opacity: 0.7; margin-top: 10px; display: block;">
                Si no se redirige autom치ticamente, <a href="/login.html" style="color: #00ffff;">haz clic aqu칤</a>
              </small>
            </div>
          </div>
        `;
      }
    </script>
    
    <div id="root"></div>
  </body>
</html>
